
랭그래프 고도화
- 시각화
- 분기 추가

포트폴리오 구조 정리
포트폴리오 이미지 추가
발표자료 준비


--- 
@improve_combat.md 파일과 @combat 패키지의 내용을 참고해서 전투시스템 고도화에 구현된 내용을 요약하고 추가로 진행해야 할 부분을 순차적으로 제안해줘.
:

## 구현된 내용 요약

### 1. LangGraph 기반 전투 AI 시스템 구조
- 전투 판단 흐름을 여러 노드로 구조화하여 모듈화된 시스템 구현
- 노드들: 상황분석, 전략결정, 공격계획, 도망계획, 대사생성, 응답생성
- 조건분기 처리를 통한 전략 유형에 따라 다른 행동계획 수립
### 2. 전투 AI 상태 관리
- LangGraphBattleState 클래스로 전투 상태 구조화
- 캐릭터, 행동계획, 전략 등을 체계적으로 관리
- 트레이스 및 전투 로그 기록 기능 추가
### 3. 전략 결정 프로세스
- 캐릭터 특성, 현재 상태, 전투 요약 등을 고려한 전략 결정
- 전략 유형(공격우선, 처치우선, 방어우선, 지원우선, 도망우선) 분류
- 전략에 따른 행동 분기 처리
### 4. 행동 계획 수립
- 전략에 따라 공격 또는 도망 계획 수립
- 캐릭터 특성과 현재 상황을 고려한 최적 행동 결정
- 타겟 선택 로직(가장 가까운 적, 가장 약한 적 등)
### 5. 대사 생성
- 캐릭터의 성격과 행동에 맞는 대사 생성
- 전투 상황의 몰입감 증가
### 6. 오류 처리 및 폴백 메커니즘
- LLM 호출 실패 시 기본 행동으로 폴백하는 안전장치
- 예외 처리 및 로깅 기능

## 추가 고도화 방안

### 1. 전략 다양화 및 세분화
- 현재 5가지 전략 유형을 더 세분화(예: 집중공격, 넓은범위공격, 상태이상부여 등)
- 전략 결정에 영향을 주는 가중치 시스템 구현
- 지속적인 전략 평가 및 적응 메커니즘 추가
### 2. 행동 계획 고도화
- 다단계 행동 계획 수립 기능(여러 턴에 걸친 전략 실행)
- 협동 전술을 위한 아군 AI 간 전략 조율 시스템
- 지형과 날씨 요소를 더 적극적으로 활용하는 로직
### 3. 자원 관리 시스템 강화
- HP, AP, MOV 등 자원의 효율적 사용을 위한 최적화 로직
- 장기적 자원 관리를 위한 예측 시스템
### 4. 학습 및 적응형 시스템
- 전투 결과에 따른 전략 평가 및 피드백 시스템
- 플레이어의 전투 패턴에 적응하는 AI 행동 변화
### 5. 성능 최적화
- LLM 호출 최소화를 위한 캐싱 시스템
- 병렬 처리를 통한 응답 시간 단축
- 모델 경량화 또는 선택적 모델 사용(복잡한 판단은 고성능 모델, 간단한 판단은 경량 모델)
### 6. 테스트 및 평가 시스템
- 전투 AI 결정의 품질을 평가하는 지표 개발
- 자동화된 시나리오 테스트 구현
- AI 행동 시각화 및 분석 도구 개발
### 7. 추가 기능 개발
- 전투 일지 및 스토리텔링 요소 강화
- 캐릭터의 감정 상태를 반영한 행동 및 대사 생성
- 특수 상황(위기, 우세 등)에 대한 특별 행동 패턴
### 8. 문서화 및 확장성
- 전투 AI 시스템 문서화 및 API 설계
- 새로운 캐릭터 유형, 스킬, 환경 요소 쉽게 추가할 수 있는 확장 시스템

---


@nodes.py 구현된 노드 기능 요약해줘  
@graph.py 그래프 흐름도 mermaid형식으로 작성해줘
:

## 노드별 기능
1. analyze_situation:
	- 전투 상황 분석
	- 현재 캐릭터의 자원 정보(HP 비율, AP, MOV) 계산
	- 전투 로그 기반 전투 요약 생성
2. decide_strategy:
	- 캐릭터 특성과 전투 상황 기반 전략 결정
	- PydanticOutputParser로 구조화된 전략 정보 생성
	- 전략 타입(공격/처치/방어/지원/도망)과 이유 결정
3. plan_attack:
	- 공격 위주 행동 계획 수립
	- 공격적 접근과 최대 데미지를 주는 방법 선택
	- 공격 관련 스킬과 이동 경로 결정
4. plan_flee:
	- 도주 위주 행동 계획 수립
	- 안전하게 대피하고 거리를 유지하는 방법 선택
	- 방어 또는 회피 스킬과 후퇴 경로 결정
5. generate_dialogue:
	- 캐릭터 행동에 맞는 대사 생성
	- 캐릭터 특성과 종족에 맞는 말투 반영
	- FewShotPromptTemplate 활용한 대사 생성
6. create_response:
	- 최종 상태를 API 응답 형태로 정리

유틸리티 함수들:
- get_current_and_target_character: 현재 캐릭터와 타겟 캐릭터 탐색
- prepare_skill_descriptions: 사용 가능한 스킬 정보 준비
- create_action_plan_prompt: 행동 계획 프롬프트 생성
- validate_action_plan: 행동 유효성 검증 및 자원 소모 계산
- handle_llm_response: LLM 응답 처리 및 오류 대응
- update_state_with_action_plan: 상태에 행동 계획 업데이트


